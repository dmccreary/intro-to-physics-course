<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Potential Energy Comparison Chart</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 10px;
            font-family: Arial, Helvetica, sans-serif;
            background-color: #f5f8fa;
        }
        .chart-container {
            max-width: 850px;
            margin: 0 auto;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        canvas {
            width: 100% !important;
            height: auto !important;
        }
        .legend-info {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 10px;
            font-size: 12px;
            color: #666;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .legend-box {
            width: 16px;
            height: 16px;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <div class="chart-container">
        <canvas id="peChart"></canvas>
        <div class="legend-info">
            <div class="legend-item">
                <div class="legend-box" style="background: rgba(54, 162, 235, 0.8);"></div>
                <span>Gravitational PE = mgh</span>
            </div>
            <div class="legend-item">
                <div class="legend-box" style="background: rgba(255, 159, 64, 0.8);"></div>
                <span>Elastic PE = ½kx²</span>
            </div>
        </div>
    </div>
    <br/>
    <a href=".">Back to Documentation</a>

    <script>
        const ctx = document.getElementById('peChart').getContext('2d');

        const scenarios = [
            {
                label: 'Small object\nlow height',
                gravPE: 20,
                elasticPE: 25,
                gravParams: 'm=1kg, h=2m',
                elasticParams: 'k=100N/m, x=0.7m',
                gravCalc: 'PE = (1)(9.8)(2) ≈ 20 J',
                elasticCalc: 'PE = ½(100)(0.7)² ≈ 25 J'
            },
            {
                label: 'Medium object\nmedium height',
                gravPE: 98,
                elasticPE: 100,
                gravParams: 'm=5kg, h=2m',
                elasticParams: 'k=200N/m, x=1.0m',
                gravCalc: 'PE = (5)(9.8)(2) = 98 J',
                elasticCalc: 'PE = ½(200)(1.0)² = 100 J'
            },
            {
                label: 'Large object\nlow height',
                gravPE: 196,
                elasticPE: 200,
                gravParams: 'm=20kg, h=1m',
                elasticParams: 'k=400N/m, x=1.0m',
                gravCalc: 'PE = (20)(9.8)(1) = 196 J',
                elasticCalc: 'PE = ½(400)(1.0)² = 200 J'
            },
            {
                label: 'Small object\nhigh height',
                gravPE: 294,
                elasticPE: 288,
                gravParams: 'm=3kg, h=10m',
                elasticParams: 'k=800N/m, x=0.85m',
                gravCalc: 'PE = (3)(9.8)(10) = 294 J',
                elasticCalc: 'PE = ½(800)(0.85)² ≈ 288 J'
            },
            {
                label: 'Large object\nhigh height',
                gravPE: 490,
                elasticPE: 450,
                gravParams: 'm=5kg, h=10m',
                elasticParams: 'k=1000N/m, x=0.95m',
                gravCalc: 'PE = (5)(9.8)(10) = 490 J',
                elasticCalc: 'PE = ½(1000)(0.95)² ≈ 450 J'
            }
        ];

        const data = {
            labels: scenarios.map(s => s.label),
            datasets: [
                {
                    label: 'Gravitational PE (mgh)',
                    data: scenarios.map(s => s.gravPE),
                    backgroundColor: 'rgba(54, 162, 235, 0.8)',
                    borderColor: 'rgb(54, 162, 235)',
                    borderWidth: 1,
                    barPercentage: 0.8,
                    categoryPercentage: 0.7
                },
                {
                    label: 'Elastic PE (½kx²)',
                    data: scenarios.map(s => s.elasticPE),
                    backgroundColor: 'rgba(255, 159, 64, 0.8)',
                    borderColor: 'rgb(255, 159, 64)',
                    borderWidth: 1,
                    barPercentage: 0.8,
                    categoryPercentage: 0.7
                }
            ]
        };

        const config = {
            type: 'bar',
            data: data,
            options: {
                responsive: true,
                maintainAspectRatio: true,
                aspectRatio: 1.6,
                plugins: {
                    title: {
                        display: true,
                        text: 'Gravitational vs. Elastic Potential Energy Comparison',
                        font: { size: 18, weight: 'bold' },
                        padding: { top: 10, bottom: 20 }
                    },
                    legend: {
                        display: true,
                        position: 'top',
                        labels: {
                            font: { size: 12 },
                            usePointStyle: true,
                            padding: 15
                        }
                    },
                    tooltip: {
                        callbacks: {
                            title: function(context) {
                                return scenarios[context[0].dataIndex].label.replace('\n', ' ');
                            },
                            label: function(context) {
                                const idx = context.dataIndex;
                                const scenario = scenarios[idx];
                                const isGrav = context.datasetIndex === 0;

                                let lines = [];
                                lines.push(context.dataset.label + ': ' + context.raw + ' J');
                                lines.push('');
                                if (isGrav) {
                                    lines.push('Parameters: ' + scenario.gravParams);
                                    lines.push('Calculation: ' + scenario.gravCalc);
                                } else {
                                    lines.push('Parameters: ' + scenario.elasticParams);
                                    lines.push('Calculation: ' + scenario.elasticCalc);
                                }
                                return lines;
                            }
                        },
                        backgroundColor: 'rgba(0, 0, 0, 0.85)',
                        titleFont: { size: 14, weight: 'bold' },
                        bodyFont: { size: 12 },
                        padding: 12,
                        displayColors: true
                    }
                },
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'Scenario',
                            font: { size: 14, weight: 'bold' }
                        },
                        ticks: {
                            font: { size: 10 },
                            maxRotation: 0
                        },
                        grid: {
                            display: false
                        }
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'Potential Energy (J)',
                            font: { size: 14, weight: 'bold' }
                        },
                        beginAtZero: true,
                        max: 550,
                        ticks: {
                            stepSize: 100,
                            font: { size: 11 }
                        },
                        grid: {
                            color: 'rgba(0, 0, 0, 0.1)'
                        }
                    }
                }
            },
            plugins: [{
                id: 'valueLabels',
                afterDatasetsDraw: function(chart) {
                    const ctx = chart.ctx;
                    chart.data.datasets.forEach((dataset, i) => {
                        const meta = chart.getDatasetMeta(i);
                        meta.data.forEach((bar, index) => {
                            const value = dataset.data[index];
                            ctx.save();
                            ctx.fillStyle = '#333';
                            ctx.font = 'bold 11px Arial';
                            ctx.textAlign = 'center';
                            ctx.textBaseline = 'bottom';
                            ctx.fillText(value + ' J', bar.x, bar.y - 4);
                            ctx.restore();
                        });
                    });
                }
            }]
        };

        new Chart(ctx, config);
    </script>
</body>
</html>
